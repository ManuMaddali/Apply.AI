<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Person">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <meta name="format-detection" content="telephone=no">
  
  <!-- PDF Generation Meta Tags -->
  <meta name="author" content="{{ display_name or resume.name or 'Resume' }}">
  <meta name="subject" content="Professional Resume">
  <meta name="keywords" content="resume, cv, professional, {% if resume.skills %}{% for s in resume.skills %}{{ s.name }}{% if not loop.last %}, {% endif %}{% endfor %}{% endif %}">
  <meta name="creator" content="ApplyAI Resume Builder">
  
  <title>{{ display_name or resume.name or 'Professional Resume' }} – Resume</title>
  
  <style>
    {{ inline_css }}
    
    /* Print-specific CSS rules */
    @media print {
      body { 
        print-color-adjust: exact;
        -webkit-print-color-adjust: exact;
      }
      .no-print { display: none !important; }
      .page-break { page-break-before: always; }
      .avoid-break { page-break-inside: avoid; }
    }
    
    /* Responsive adjustments */
    @media screen and (max-width: 768px) {
      .row { 
        display: block; 
      }
      .left, .right { 
        display: block; 
        width: 100%; 
        margin-bottom: 0.5rem;
      }
    }
  </style>
</head>

<body itemscope itemtype="http://schema.org/Person">
  <!-- Header with contact information -->
  <header role="banner" class="resume-header">
    {% if display_name or resume.name %}
    <h1 itemprop="name" class="person-name">
      {{ display_name or resume.name }}
    </h1>
    {% endif %}
    
    {% if resume.headline %}
    <div class="headline" itemprop="jobTitle">
      {{ resume.headline }}
    </div>
    {% endif %}
    
    {% if resume.contact %}
    <address class="contact-info meta" itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
      {% if resume.contact.location %}
        <span itemprop="addressLocality">{{ resume.contact.location }}</span>
      {% endif %}
      
      {% if resume.contact.email %}
        {% if resume.contact.location %} • {% endif %}
        <a href="mailto:{{ resume.contact.email }}" itemprop="email">{{ resume.contact.email }}</a>
      {% endif %}
      
      {% if resume.contact.phone %}
        {% if resume.contact.email or resume.contact.location %} • {% endif %}
        <a href="tel:{{ resume.contact.phone }}" itemprop="telephone">{{ resume.contact.phone }}</a>
      {% endif %}
      
      {% if resume.contact.links %}
        {% for link in resume.contact.links %}
          • <a href="{{ link.url }}" itemprop="url" target="_blank" rel="noopener">{{ link.label }}</a>
        {% endfor %}
      {% endif %}
    </address>
    {% endif %}
  </header>

  <main role="main" class="resume-content">
    {# Fallback: if no structured sections present, render raw text cleanly #}
    {% if use_fallback %}
    <section class="fallback-section avoid-break">
      <h2 class="section-title">Resume</h2>
      <div class="fallback-content">
        {% if raw_lines %}
          {% for line in raw_lines %}
            {% if line.strip() %}
            <p>{{ line }}</p>
            {% endif %}
          {% endfor %}
        {% else %}
          <p>No resume content available.</p>
        {% endif %}
      </div>
    </section>
    {% endif %}

    {% if resume.summary %}
    <section class="summary-section avoid-break" itemprop="description">
      <h2 class="section-title">Professional Summary</h2>
      <div class="summary-content">
        {{ resume.summary }}
      </div>
    </section>
    {% endif %}

    {% if resume.experience and resume.experience|length > 0 %}
    <section class="experience-section">
      <h2 class="section-title">Professional Experience</h2>
      {% for role in resume.experience %}
        <article class="job-entry row avoid-break" itemprop="worksFor" itemscope itemtype="http://schema.org/Organization">
          <div class="job-meta left meta">
            {% if role.company %}
            <div class="company-name" itemprop="name">{{ role.company }}</div>
            {% endif %}
            
            <div class="job-duration">
              {% if role.start %}{{ role.start }}{% endif %}
              {% if role.start and (role.end or role.end != role.start) %} – {% endif %}
              {% if role.end %}{{ role.end }}{% else %}Present{% endif %}
            </div>
            
            {% if role.location %}
            <div class="job-location" itemprop="address">{{ role.location }}</div>
            {% endif %}
          </div>
          
          <div class="job-details right">
            {% if role.title %}
            <h3 class="job-title" itemprop="jobTitle">{{ role.title }}</h3>
            {% endif %}
            
            {% if role.bullets and role.bullets|length > 0 %}
            <ul class="job-achievements" role="list">
              {% for bullet in role.bullets %}
                {% if bullet.strip() %}
                <li>{{ bullet }}</li>
                {% endif %}
              {% endfor %}
            </ul>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </section>
    {% endif %}

    {% if resume.projects and resume.projects|length > 0 %}
    <section class="projects-section">
      <h2 class="section-title">Notable Projects</h2>
      {% for project in resume.projects %}
        <article class="project-entry row avoid-break" itemprop="workExample" itemscope itemtype="http://schema.org/CreativeWork">
          <div class="project-meta left meta">
            <!-- Project metadata could go here -->
          </div>
          
          <div class="project-details right">
            {% if project.name %}
            <h3 class="project-name" itemprop="name">{{ project.name }}</h3>
            {% endif %}
            
            {% if project.description %}
            <div class="project-description" itemprop="description">{{ project.description }}</div>
            {% endif %}
            
            {% if project.bullets and project.bullets|length > 0 %}
            <ul class="project-highlights" role="list">
              {% for bullet in project.bullets %}
                {% if bullet.strip() %}
                <li>{{ bullet }}</li>
                {% endif %}
              {% endfor %}
            </ul>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </section>
    {% endif %}

    {% if resume.education and resume.education|length > 0 %}
    <section class="education-section">
      <h2 class="section-title">Education</h2>
      {% for education in resume.education %}
        <article class="education-entry row avoid-break" itemprop="alumniOf" itemscope itemtype="http://schema.org/EducationalOrganization">
          <div class="education-meta left meta">
            {% if education.end %}
            <time class="graduation-date" datetime="{{ education.end }}">{{ education.end }}</time>
            {% endif %}
          </div>
          
          <div class="education-details right">
            {% if education.degree %}
            <h3 class="degree-title">{{ education.degree }}</h3>
            {% endif %}
            
            {% if education.school %}
            <div class="institution-name" itemprop="name">{{ education.school }}</div>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </section>
    {% endif %}

    {% if resume.skills and resume.skills|length > 0 %}
    <section class="skills-section avoid-break">
      <h2 class="section-title">Technical Skills</h2>
      <div class="skills-container">
        <div class="skills-list meta" itemprop="knowsAbout">
          {% for skill in resume.skills %}
            {% if skill.name and skill.name.strip() %}
              <span class="skill-item">{{ skill.name }}</span>{% if not loop.last %}, {% endif %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </section>
    {% endif %}
  </main>

  <!-- Structured data for better parsing -->
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Person",
    {% if display_name or resume.name %}"name": "{{ display_name or resume.name }}",{% endif %}
    {% if resume.headline %}"jobTitle": "{{ resume.headline }}",{% endif %}
    {% if resume.contact.email %}"email": "{{ resume.contact.email }}",{% endif %}
    {% if resume.contact.phone %}"telephone": "{{ resume.contact.phone }}",{% endif %}
    {% if resume.contact.location %}"address": "{{ resume.contact.location }}",{% endif %}
    {% if resume.summary %}"description": "{{ resume.summary|replace('"', '\\"') }}",{% endif %}
    "url": [
      {% if resume.contact.links %}
        {% for link in resume.contact.links %}
          "{{ link.url }}"{% if not loop.last %},{% endif %}
        {% endfor %}
      {% endif %}
    ]
  }
  </script>
</body>
</html>



